# **CPU Scheduling**

## **CPU Scheduling 이란?**
![CPU 스케쥴링](../img/cpu스케쥴링.png)
* OS가 CPU를 사용하려고 하는 프로세스들 사이의 우선순위를 관리하는 작업
* 자원을 어떤 프로세스에 얼마나 할당하는지 정책을 만드는 것
* 프로세스들에게 자원을 최대한 공평하게 배분하며 처리율과 CPU 이용률을 증가시키고 오버헤드, 응답시간(Response time, Turnaround time), 대기시간을 최소화하기 위한 기법

## **프로세스 상태 전이**
![프로세스 상태](../img/프로세스%20상태%20전이.png)
* **생성(New)**
    
    제일 첫번째로 New에서 Ready로 전이되는 과정이다. 프로세스가 생성되고 나서 생성된 프로세스는 준비(Ready) 상태에 머문다. 준비 상태는 CPU를 점유하고 있는 상태가 아니라, CPU를 점유하길 희망하는 상태이다. 준비 상태에서 실행 상태로 넘어가려면 작업 스케쥴러가 선택해 줘야 한다.

* **디스패치(Dispatch)**
    
    디스패치란 준비 상태에서 실행 상태로 전이되는 과정을 말하며 이는 작업 스케쥴러가 해당 프로세스를 선택하여 실행되어지는 것으로 이때 실행된 프로세스가 CPU를 점유하게 된다.

* **인터럽트(Interrupt)**
    
    인터럽트 신호를 받게되면 실행중이던 프로세스는 준비 상태로 전이되고 우선순위(Priority)가 높은 프로세스를 실행상태로 전이시킨다.

* **입출력 혹은 이벤트 대기(I/O or event wait)**
    
    CPU를 점유하고 있는 프로세스가 입출력 처리를 해야만 하는 상황이라면, 실행되고 있는 프로세스는 실행 상태에서 대기/보류 상태로 바뀐다. 그리고 대기 상태로 바뀐 프로세스는 입출력 처리가 모두 끝날때까지 대기 상태로 머문다. 실행 상태이던 프로세스가 대기 상태로 전이됨과 함께, 준비 상태이던 또다른 프로세스가 실행 상태로 전이된다. 또한 대기 상태인 프로세스는 우선순위가 부여되지 않으며 스케쥴러에 의해 선택될 수 없다.

* **입출력 혹은 이벤트 완료(I/O or event completion)**

    입출력 처리가 끝난 프로세스는 대기 상태에서 준비 상태로 전이되어 스케쥴러에게 선택될 수 있게 된다. 추가로 프로세스를 종료(Terminate)시킬 때에도 Blocked 상태를 거칠 수 있다.


## **비선점 vs 선점 스케쥴링**

### 비선점 스케쥴링
* 프로세스가 입출력 요구등으로 CPU를 자진 반납할 때까지 CPU에 의한 실행을 보장해주는 스케쥴링이다. 작업 실행 시간 전체 또는 한번의 CPU 배당에 적용된다.
* 모든 프로세스에 대한 요구를 공정하게 처리할 수 있지만, 짧은 작업을 수행하는 프로세스가 긴 작업 종료 시까지 대기해야할 수도 있다. (convey 현상)
* 처리시간 편차가 적은 특정 프로세스 환경에 용이하다.

### 선점 스케쥴링
* 시분할 시스템에서 타임슬라이스가 소진되었거나 인터럽트 혹은 시스템 호출 종료로 인한 여파로 높은 우선순위의 프로세스가 현 프로세스보다를 강제로 중단시키고 CPU를 회수하는 스케쥴링 방식이다.
* 비교적 응답이 빠르다는 장점이 있지만, 처리 시간을 예측하기 힘들고 높은 우선순위 프로세스들이 계속 들어오는 경우 오버헤드를 초래한다.
* 실시간 응답환경, Deadline 응답환경 등 우선순위가 높은 프로세스를 빠르게 처리해야 할 경우 등에 유용하다.

## **비선점, 선점 스케쥴링의 대표적인 종류**
 
|비선점 스케쥴링|선점 스케쥴링|
|:---:|:---:|
|FCFS(First Come First Served)|라운드 로빈 스케쥴링|
|최단 작업 우선(SJF, Shortest Job First)|다단계 큐 스케쥴링|
|우선순위 스케쥴링(Priority Scheduling)|다단계 피드백 큐 스케쥴링|

## References
* [AlphaGiver velog](https://velog.io/@mooh2jj/CPU-%EC%8A%A4%EC%BC%80%EC%A5%B4%EB%A7%81-%EC%A0%95%EB%A6%AC)
* [이누의 개발성장기](https://inuplace.tistory.com/318)